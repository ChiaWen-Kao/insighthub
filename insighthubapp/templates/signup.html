{% extends "base.html" %}

{% load static %}

{% block content %}
<div class="container-fluid min-vh-100 d-flex flex-column justify-content-center align-items-center">
  <div class="row w-100 p-4">
    <div class="col-sm-12 col-md-6 col-lg-6 d-flex align-items-center justify-content-center">
      <div class="custom-signup-image-container">
        <img className="custom-signup-image"
          src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1415&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" />
      </div>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-6 p-5 d-flex align-items-center">
      <form method="post" enctype="multipart/form-data" class="custom-signup-form-container w-100">
        {% csrf_token %}
        <div class="row">
          <div class="col-sm-12 col-md-8 col-lg-10">
            <h2 class="mb-2">Sign Up!</h2>
          </div>
          <div class="col-sm-12 col-md-4 col-lg-2">
            <a href="{% url 'index' %}" class="text-reset"><i class="bi bi-arrow-left-short">Return</i></a>
          </div>
        </div>
        <p class="mb-4">Enter your details below to create an account and get started.</p>
        <div class="row">
          <div class="col-md-6">
            <div class="form-floating mb-3">
              {{ form.first_name }}
              <label for="floatingFirstName">First Name</label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-floating mb-3">
              {{ form.last_name }}
              <label for="floatingLastName">Last Name</label>
            </div>
          </div>
        </div>
        <div class="form-floating mb-3">
          {{ form.username }}
          <label for="floatingUsername">Username</label>
        </div>
        <div class="form-floating mb-3">
          {{ form.email }}
          <label for="floatingEmail">Email</label>
        </div>
        <div class="form-floating mb-3">
          {{ form.password1 }}
          <label for="floatingPassword">Password</label>
        </div>
        <div class="form-floating mb-3">
          {{ form.password2 }}
          <label for="floatingConfirmPassword">Confirm your password</label>
        </div>
        <div class="form-check mb-3">
          {{ form.agree_terms}}
          <label class="form-check-label" for="gridCheck">
            I agree to all
          </label>
          <a class="text-decoration-underline" id="termsConditionsLink">terms and conditions</a>
        </div>
        {% if form.errors %}
        <div class="alert alert-danger p-2">
          <ul class="mb-0">
            {% for field in form %}
            {% for error in field.errors %}
            <li>{{ error }}</li>
            {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}

        <button type="submit" class="btn btn-dark mt-5 w-100">Submit</button>
        <div class="mt-3 d-flex justify-content-center">
          <p class="m-0">Already have an account? <a href="{% url 'login' %}" class="text-reset">Login</a></p>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Term and policy pop up modal -->
<div class="modal " tabindex="-1" id="termsConditionModal">
  <div class="modal-dialog modal-dialog-scrollable modal-lg p-3">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Terms and Conditions</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <h2>Privacy Policy</h2>
        <p>
          <strong>Last updated:</strong> May 11, 2025
        </p>
        <p>
          This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our
          website and services. By accessing or using our site, you agree to the terms of this policy.
        </p>

        <h4>Information We Collect</h4>
        <ul>
          <li><strong>Personal Information:</strong> Such as your name, email address, and account details when you
            register or interact with our services.</li>
          <li><strong>Usage Data:</strong> Information about how you use our website, including IP address, browser
            type, and access times.</li>
          <li><strong>Uploaded Content:</strong> Any files, datasets, or content you upload to our platform.</li>
        </ul>

        <h4>How We Use Your Information</h4>
        <ul>
          <li>To provide, operate, and maintain our services.</li>
          <li>To improve, personalize, and expand our website.</li>
          <li>To communicate with you, including for customer service and updates.</li>
          <li>To process your transactions and manage your account.</li>
          <li>To comply with legal obligations.</li>
        </ul>

        <h4>Information Sharing</h4>
        <ul>
          <li>We do not sell your personal information.</li>
          <li>We may share information with service providers who assist us in operating our website.</li>
          <li>We may disclose information if required by law or to protect our rights.</li>
        </ul>

        <h4>Data Security</h4>
        <p>
          We implement reasonable security measures to protect your information. However, no method of transmission over
          the Internet is 100% secure.
        </p>

        <h4>Your Rights</h4>
        <ul>
          <li>You may access, update, or delete your personal information by contacting us.</li>
          <li>You may opt out of certain communications at any time.</li>
        </ul>

        <h4>Changes to This Policy</h4>
        <p>
          We may update this Privacy Policy from time to time. Changes will be posted on this page with an updated
          effective date.
        </p>

        <h4>Contact Us</h4>
        <p>
          If you have any questions about this Privacy Policy, please contact us at <a
            href="mailto:chiawen.kao@student.uq.edu.au">chiawen.kao@student.uq.edu.au</a>.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-dark" data-bs-dismiss="modal" id="termsConditionAgree">Agree</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Show modal when the terms and conditions link is clicked
    const termsConditionsLink = document.getElementById("termsConditionsLink");
    const termsConditionModal = document.getElementById("termsConditionModal");
    const agreeBtn = document.getElementById("termsConditionAgree");
    const checkbox = document.getElementById("gridCheck");

    termsConditionsLink.addEventListener("click", () => {
      if (termsConditionsLink) {
        termsModal = new bootstrap.Modal(termsConditionModal);
        termsModal.show();
      }
    });

    if (agreeBtn && checkbox) {
      agreeBtn.addEventListener("click", () => {
        checkbox.checked = true;
        termsModal.hide();
      });
    }
  });
</script>
{% endblock %}